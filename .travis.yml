sudo: required
language: bash
services: docker
env:
  matrix:
  - ARCH=x86_64 PUID=1000 PGID=1000
#  - ARCH=armhf  PUID=1001 PGID=1001
  global:
  - secure: CZKtyOrUtI7BqrgaooCQq859uOfwf9wyfvT6EZ53dRKwnf/UqlrL7laMIdxhTasjnEWSKqWxl06IYSD8hYCs92sEWq54C68RedfmZpiyGW96bjRIMTdkwdJj9vT+x8I3gCeiK5YQLCjMWBWSgkc0Rd9yHwIL3G32glSnhN+a8PsFYngKPCFXNKCVO5n9shV5nMAZ9IW6jz1LxJ9xuAfD0CkwhrrTIs8QzOBAnnVEzhu0lzBVRc+KmUJlUxn67B1BD0Lor3rL4WbyRGMdD1o8Ie0bJsUIoSDdeL+bD9ZKy/B6KInyzztBjnW7nA7Ku/jI4sfSFLCYTQTPpHzISGe8b/R3BQW3jqEoXjb851cz++Z4kL85swFFvtw8TBsMk/9pcCFo2/yFXs9oVT8Ucyp+0M1iQjAdC1NXWrZoImvcJpHSTUXxu2sTlANgZ7qCaPo42DacUXkzFdEvBttKSt3xPlEUGvMBYJ9yKcNsSTTv5YzzMrsEf3mf6Vl/vFTdH89MltOvITnmP2GvJWczEYMyyE7uTbj/GJIjFHA+VBqaeQGrOQFS1ancYUD+jxmNJ6xsmOuHKmm0r1fuKEnDHwxVz9DPuO6RckZ6Q02eWO0lo0hZUZM4xjCqM6a9MiUZI+KqTIN+4PTdu4Tg2VEPYaD4WX900PML1R6NlnwtKjcBUjk=
  - secure: Xq9fG9yBvGA6NPKzLpXGcFD07904ydo7WTnjOPUIdjuvqzsj8hZa9bQedH2PTuLEnu6QXLHTO2NuRLZPd5GM0LffGBMu/Yoxac1YuxzZdrcFRij03sIQ5RWgqwEnfQ4fpNoV9m0YmRSzsNAOTjPXI5UdTpJ/Znm2zzqDuMVqFfBQXq15RVmi/CNIoqkcG+rgY6lZ69IzoC2iGnxoF9eyU+CRsE1I+xXSpn3jObBE2lxNAg+8qRVHwjnMvsIG5zG9WwJwqPlCC0mD8OLhY0Rh+r8Ab0j8yeTusAdpM8MGveBH3E9MpHJIRu6q67uHGiTTn0ffkFAyfB0h02l3qo/52Klu6M/TXsfbu3huersyeVdl7KA/S718IK8oMUI7Cao/Ec4SeUAtrM3NAc9s7UqbKQPKr+fYh7a1/CSXsEldv8QhRknVe5E6Mb16DbxdV8MJ67pC2jPTBFOXVcttnJQ0dR7um0EpIVLTbUjP/8lLuPbXsACLhez1Qalg6SXe+PGjjHMDGvktHj+5DFDvDBXRmQ6fvxrXr5MRCnmna71BzIn4cHa0bnqfTelBhtnL12XBV3+AMpHpUcoOVQyQ53LcupGbvWKULKij27I4Uqk7t+Jsmcg6fistAV8+oyX+068dKRZxjnrHQUb/RFcV62C6mPX+1mYPMQaUFFO0rOv8h6k=
install: true
before_script:
- docker --version
- make --version
script:
- make ARCH=${ARCH} PUID=${PUID} PGID=${PGID} build test
after_success:
- docker login -u ${DOCKER_USER} -p ${DOCKER_PASS}
- make ARCH=${ARCH} push
after_script:
- docker logout
- make clean
